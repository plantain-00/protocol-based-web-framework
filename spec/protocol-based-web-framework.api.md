## API Report File for "protocol-based-web-framework"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

/// <reference types="node" />
/// <reference types="qs" />

import Ajv from 'ajv';
import type { Client } from 'pg';
import type { Database } from 'sqlite3';
import type { Db } from 'mongodb';
import type { Document as Document_2 } from 'mongodb';
import type { Filter } from 'mongodb';
import { ObjectID } from 'bson';
import { ParsedQs } from 'qs';
import type { Pool } from 'pg';
import type { Readable } from 'stream';
import type { Request as Request_2 } from 'express';
import type { Response as Response_2 } from 'express';
import { ValidateFunction } from 'ajv';
import { WithId } from 'mongodb';

// @public (undocumented)
export const ajvBackend: Ajv;

// @public (undocumented)
export const ajvFrontend: Ajv;

// @public (undocumented)
export class ApiAccessorFetch<T extends {
    method: string;
    url: string;
    schema: {
        definitions: {
            [key: string]: {
                $ref?: string;
                properties?: {
                    [key: string]: unknown;
                };
                required?: string[];
            };
        };
    };
    omittedReferences: string[];
    validate: ValidateFunction;
    urlPattern?: RegExp;
}> {
    constructor(validations: T[]);
    // (undocumented)
    composeUrl: (url: string, args?: {
        path?: {
            [key: string]: string | number;
        } | undefined;
        query?: {} | undefined;
    } | undefined) => string;
    // (undocumented)
    requestRestfulAPI: (method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE', url: string, args?: {
        path?: {
            [key: string]: string | number;
        } | undefined;
        query?: {
            ignoredFields?: string[] | undefined;
            pickedFields?: string[] | undefined;
            attachmentFileName?: string | undefined;
        } | undefined;
        body?: {} | undefined;
    } | undefined) => Promise<any>;
}

// @public (undocumented)
export function getAndValidateRequestInput(req: Request_2<{}, {}, {}>, validate: ValidateFunction<unknown>, cookie?: unknown): string | {
    path: {};
    query: ParsedQs;
    body: {
        [key: string]: unknown;
    };
    cookie: unknown;
};

// @public (undocumented)
export const getKeys: <T>(obj: T) => (keyof T)[];

// @public (undocumented)
export class MongodbAccessor<TableName extends string> {
    constructor(db: Db, tableSchemas: Record<TableName, {
        fieldNames: string[];
    }>);
    // (undocumented)
    countRow: <T>(tableName: TableName, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: MongodbRawFilter;
    }> | undefined) => Promise<number>;
    // (undocumented)
    deleteRow: <T>(tableName: TableName, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: MongodbRawFilter;
    }> | undefined) => Promise<void>;
    // (undocumented)
    getRow: <T extends Record<string, unknown>>(tableName: TableName, options?: RowSelectOneOptions<T, MongodbRawFilter> | undefined) => Promise<WithId<Document_2> | undefined>;
    // (undocumented)
    insertRow: <T extends Record<string, unknown>>(tableName: TableName, value: T) => Promise<ObjectID>;
    // (undocumented)
    selectRow: <T extends Record<string, unknown>>(tableName: TableName, options?: RowSelectOptions<T, MongodbRawFilter> | undefined) => Promise<Document_2[]>;
    // (undocumented)
    updateRow: <T extends Record<string, unknown>>(tableName: TableName, value?: T | undefined, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: MongodbRawFilter;
    }> | undefined) => Promise<number>;
}

// @public (undocumented)
export type MongodbRawFilter = Filter<unknown>;

// @public (undocumented)
export class PostgresAccessor<TableName extends string> {
    constructor(client: Client | Pool, tableSchemas: Record<TableName, {
        fieldNames: string[];
        fieldTypes: string[];
        autoIncrementField?: string;
        optionalFields: string[];
        uniqueFields: string[];
        indexFields: string[];
    }>);
    // (undocumented)
    countRow: <T>(tableName: TableName, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: SqlRawFilter;
    }> | undefined) => Promise<number>;
    // (undocumented)
    createTable: (tableName: TableName) => Promise<void>;
    // (undocumented)
    deleteRow: <T>(tableName: TableName, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: SqlRawFilter;
    }> | undefined) => Promise<void>;
    // (undocumented)
    getRow: <T extends Record<string, unknown>>(tableName: TableName, options?: RowSelectOneOptions<T, SqlRawFilter> | undefined) => Promise<T | undefined>;
    // (undocumented)
    insertRow: <T extends Record<string, unknown>>(tableName: TableName, value: T) => Promise<number>;
    // (undocumented)
    selectRow: <T extends Record<string, unknown>>(tableName: TableName, options?: RowSelectOptions<T, SqlRawFilter> | undefined) => Promise<(T | undefined)[]>;
    // (undocumented)
    updateRow: <T extends Record<string, unknown>>(tableName: TableName, value?: T | undefined, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: SqlRawFilter;
    }> | undefined) => Promise<number>;
}

// @public (undocumented)
export function respondHandleResult(result: {} | Readable, req: Request_2<{}, {}, {}>, res: Response_2<{}>): void;

// @public (undocumented)
export type RowFilterOptions<T, TRaw = SqlRawFilter> = Partial<{
    filter: {
        [P in keyof T]?: T[P] | readonly T[P][];
    };
    fuzzyFilter: {
        [P in keyof T]?: T[P] | readonly T[P][];
    };
    rawFilter: TRaw;
}>;

// @public (undocumented)
export type RowSelectOneOptions<T, TRaw = SqlRawFilter> = RowFilterOptions<T, TRaw> & RowSelectSortOption<T> & RowSelectProjectOption<T>;

// @public (undocumented)
export type RowSelectOptions<T, TRaw = SqlRawFilter> = Partial<{
    pagination: {
        take: number;
        skip: number;
    };
}> & RowSelectOneOptions<T, TRaw>;

// @public (undocumented)
export type RowSelectProjectOption<T> = Partial<{
    ignoredFields: (keyof T)[];
    pickedFields: (keyof T)[];
}>;

// @public (undocumented)
export type RowSelectSortOption<T> = Partial<{
    sort: {
        field: keyof T;
        type: 'asc' | 'desc';
    }[];
}>;

// @public (undocumented)
export class SqliteAccessor<TableName extends string> {
    constructor(db: Database, tableSchemas: Record<TableName, {
        fieldNames: string[];
        complexFields: string[];
        autoIncrementField?: string;
        optionalFields: string[];
        uniqueFields: string[];
        indexFields: string[];
    }>);
    // (undocumented)
    countRow: <T>(tableName: TableName, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: SqlRawFilter;
    }> | undefined) => Promise<number>;
    // (undocumented)
    createTable: (tableName: TableName) => Promise<void>;
    // (undocumented)
    deleteRow: <T>(tableName: TableName, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: SqlRawFilter;
    }> | undefined) => Promise<void>;
    // (undocumented)
    getRow: <T extends Record<string, unknown>>(tableName: TableName, options?: RowSelectOneOptions<T, SqlRawFilter> | undefined) => Promise<T | undefined>;
    // (undocumented)
    insertRow: <T extends Record<string, unknown>>(tableName: TableName, value: T) => Promise<number>;
    // (undocumented)
    selectRow: <T extends Record<string, unknown>>(tableName: TableName, options?: RowSelectOptions<T, SqlRawFilter> | undefined) => Promise<T[]>;
    // (undocumented)
    updateRow: <T extends Record<string, unknown>>(tableName: TableName, value?: T | undefined, options?: Partial<{
        filter: { [P in keyof T]?: T[P] | readonly T[P][] | undefined; };
        fuzzyFilter: { [P_1 in keyof T]?: T[P_1] | readonly T[P_1][] | undefined; };
        rawFilter: SqlRawFilter;
    }> | undefined) => Promise<number>;
}

// @public (undocumented)
export interface SqlRawFilter {
    // (undocumented)
    sql: string;
    // (undocumented)
    value: unknown[];
}

// (No @packageDocumentation comment for this package)

```
